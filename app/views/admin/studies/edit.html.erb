<h1>Admin::Studies#edit</h1>
<p>Find me in app/views/admin/studies/edit.html.erb</p>

<%= form_for(@study, url: admin_study_path) do |f| %>
	<div>
		採点結果：<%= f.text_field :score, autofocus: true, autocomplete: "score" %> 点
	</div>
	<div class="field"><%= f.attachment_field :correction_images_images, multiple: true %></div>
	<div>
		<%= f.submit "send" %>
	</div>
<% end %>
<img id="preview_0" style="width:30%;">
<img id="preview_1" style="width:30%;">
<img id="preview_2" style="width:30%;">
<img id="preview_3" style="width:30%;">
<img id="preview_4" style="width:30%;">
<img id="preview_5" style="width:30%;">
<img id="preview_6" style="width:30%;">
<img id="preview_7" style="width:30%;">
<img id="preview_8" style="width:30%;">
<img id="preview_9" style="width:30%;">
<img id="preview_10" style="width:30%;">
<img id="preview_11" style="width:30%;">


<script>
	$('#study_correction_images_images').on('change', function (e) {
		// 初期化
		let reader = new FileReader(12);
		for (let i = 0; i < 12; i++) {
			$(`#preview_${i}`).attr('src', "");
		}

		for (let i = 0; i < e.target.files.length; i++) {
			reader[i] = new FileReader();
			reader[i].onload = finisher(i, e);
			reader[i].readAsDataURL(e.target.files[i]);

			function finisher(i, e) {
				return function(e) {
					$(`#preview_${i}`).attr('src', e.target.result);
				}
			}
		}
	});
</script>